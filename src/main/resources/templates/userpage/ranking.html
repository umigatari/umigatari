<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ランキング</title>
    <link rel="stylesheet" href="/css/userpage/userpage.css">
    <script src="/js/ranking.js"></script>
</head>
<body>
    <div class="header">
        <img src="/img/umigatari.png" alt="umigatarilogo">
        <img src="/img/batu.png" alt="batu">
        <img src="/img/jjc.png" alt="jjclogo">
        <div class="menu-icon" id="menu-icon">≡</div>
        </div>

<div class="container">
    <h2>ランキング</h2>

    <div class="update-time">
        <p>最終更新: <span id="update-time">loading...</span></p>
    </div>

    <ul class="ranking-list">
        <li class="ranking-item">
            <span class="rank">順位</span>
            <span class="name">名前</span>
            <span class="points">正解数</span>
        </li>

        <li th:each="account, iterStat : ${ranking}" class="ranking-item" th:classappend="${iterStat.index + 1 == myranking ? ' highlight' : ''}">
            <span class="rank">
                <span th:if="${iterStat.index + 1 == 1}">
                    <img src="/img/1st.png" alt="1st" class="rank-icon">
                </span>
                <span th:if="${iterStat.index + 1 == 2}">
                    <img src="/img/2nd.png" alt="2nd" class="rank-icon">
                </span>
                <span th:if="${iterStat.index + 1 == 3}">
                    <img src="/img/3rd.png" alt="3rd" class="rank-icon">
                </span>
                <span th:if="${iterStat.index + 1 > 3}" th:text="${iterStat.index + 1}"></span>
            </span>
            <span class="name" th:text="${account.name}">User Name</span>
            <span class="count" th:text="${account.count}">100</span>
        </li>
    </ul>

    <div class="my-ranking">
        <p>あなたの順位は <span th:text="${myranking}">5</span> 位です。</p>
    </div>
    <div class="dropdown-menu" id="dropdown-menu">
        <button id="closePopup" class="close-btn">×</button>
        <a href="/rule">
            <img src="/img/rule.png" alt="ルール" class="icon">
            ルール
        </a>
        <a href="/reward">
            <img src="/img/reward.png" alt="プレゼント" class="icon">
            プレゼント
        </a>
        <a href="/ranking">
            <img src="/img/ranking.png" alt="ランキング" class="icon">
            ランキング
        </a>
        <a href="/quiz/createpage">
            <img src="/img/createquiz.png" alt="クイズ作成" class="icon">
            クイズ作成
        </a>
        <span>
            <img src="/img/account.png" alt="アカウント" class="icon">
            アカウント
        </span>
        <span th:text="'アカウント名: ' + ${account} ">アカウント名</span>
        <span id="logout-link" class="action-link">ログアウト</span>
        <span id="delete-link" class="action-link">アカウント削除</span>
    </div>
    
    
    <div id="logout-popup" class="popup">
        <div class="popup-content">
            <p>ログアウトしますか？</p>
            <button id="confirm-logout-yes">はい</button>
            <button id="confirm-logout-no">いいえ</button>
    </div>
    </div>

    <div id="delete-popup" class="popup">
        <div class="popup-content">
            <p>アカウントは完全に削除されますが<br>よろしいですか？</p>
            <button id="confirm-delete-yes">はい</button>
            <button id="confirm-delete-no">いいえ</button>
    </div>
    </div>

    <div id="final-delete-popup" class="popup">
        <div class="popup-content">
            <p>本当に削除しますか？</p>
            <button id="confirm-final-delete-yes">はい</button>
            <button id="confirm-final-delete-no">いいえ</button>
    </div>
    </div>
    <div>
    <form action="stamp" method="get">
        <button type="submit">スタンプへ</button>
    </form>
</div>
<script src="/js/dropdown.js"></script>
</body>
</html>
